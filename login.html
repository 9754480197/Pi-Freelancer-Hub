<!DOCTYPE html>
<html>
<head>
  <title>Login - PiFreelancer Hub</title>
</head>
<body>

<h2>Login</h2>

<input type="email" id="email" placeholder="Email"><br><br>
<input type="password" id="password" placeholder="Password"><br><br>

<button onclick="loginUser()">Login</button>

<p id="message"></p>

<script>
function loginUser() {
  let email = document.getElementById("email").value;
  let password = document.getElementById("password").value;
  let message = document.getElementById("message");

  // ğŸ‘‘ MASTER ADMIN LOGIN (hardcoded)
  if(email === "admin@pifreelancer.com" && password === "admin123") {
    localStorage.setItem("loggedInUser", email);
    localStorage.setItem(email, JSON.stringify({
      username: "MK Admin",
      email: email,
      role: "admin"
    }));
    window.location.href = "admin-dashboard.html";
    return;
  }

  // ğŸ” Normal user login (signup se data)
  let userData = localStorage.getItem(email);

  if(!userData) {
    message.innerText = "User not found!";
    return;
  }

  let user = JSON.parse(userData);

  if(user.password !== password) {
    message.innerText = "Wrong password!";
    return;
  }

  // ğŸš« Suspended user check (future use)
  if(user.suspended === true) {
    message.innerText = "Account Suspended. Contact Admin.";
    return;
  }

  localStorage.setItem("loggedInUser", email);

  // ğŸ‘‘ Role check
  if(user.role === "admin") {
    window.location.href = "admin-dashboard.html";
  } else {
    window.location.href = "index.html";
  }
}
</script>

</body>
</html>
